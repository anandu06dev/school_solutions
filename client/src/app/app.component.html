<!-- <router-outlet></router-outlet> -->



<ng-container *ngIf="(loadLayout$|async);else layout">
    <ng-container *ngTemplateOutlet="loader"></ng-container>

</ng-container>

<ng-template #loader>
    <div style="display: grid;place-items: center;height:100vh">
        <app-loading-comp [showText]="true" [setText]="'Loading...'"></app-loading-comp>
    </div>
</ng-template>


<ng-template #layout>
    <app-root-layout>

        <div menu fxLayout="column" fxLayoutAlign="space-evenly center">
            <ng-container *ngTemplateOutlet="sidenavcontent"></ng-container>
        </div>

        <div routeSelected class="d-flex align-items-center">
            
                
                <mat-icon>{{selectedMenu?.icon}}</mat-icon>
            
            <div class="ms-1"> {{selectedMenu?.label}}</div>

        </div>
        <div toolbar fxLayout="row" fxLayoutAlign="space-evenly center">
            <ng-container *ngTemplateOutlet="dynamicDropDown"></ng-container>
        </div>
        <div container>
            <router-outlet></router-outlet>
        </div>
    </app-root-layout>
</ng-template>




<!-- Sidenavbar content -->
<ng-template #sidenavcontent>

    <img class="avatar mat-elevation-z8" class="rounded-circle text-center" width="100" height="100"
        src="https://www.jea.com/cdn/images/avatar/avatar-alt.svg" />

    <h4 class="name">{{username}}</h4>
    <p class="designation">{{role}}</p>

    <mat-divider></mat-divider>

    <ng-container *ngFor="let item of menuItems">


        <a mat-button class="menu-button w-100 d-flex justify-content-between" [routerLink]="item?.url"
            routerLinkActive="active" (click)="loadRouteToStorage(item)">
            <mat-icon>{{item.icon}}</mat-icon>
            <span class="ml-2"> {{item.label}}</span>
        </a>


    </ng-container>




    <mat-divider [inset]="true"></mat-divider>


</ng-template>


<!-- Titleebar left side content (i.e) 3 dot -->

<ng-template #dynamicDropDown>

    <!-- <button mat-button *ngFor="let item of menuItems" [fxShow]="item.showOnDesktop" [fxShow.xs]="item.showOnMobile"
        [fxShow.sm]="item.showOnTablet" [routerLink]="item?.url" routerLinkActive="active">
        <mat-icon class="mr">{{item.icon}}</mat-icon>
        {{item.label}}
    </button> -->

    <ng-container>
        <button mat-icon-button [matMenuTriggerFor]="dropMenu" class="d-md-none d-sm-block">
            <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #dropMenu="matMenu">
            <ng-container *ngFor="let item of menuItems">
                <div class="" [fxShow]="!item.showOnDesktop" [fxShow.sm]="!item.showOnTablet"
                    [fxShow.xs]="!item.showOnMobile">
                    <button mat-menu-item [routerLink]="item?.url" routerLinkActive="active"
                        (click)="loadRouteToStorage(item)">
                        <mat-icon class="mr">{{item.icon}}</mat-icon>
                        {{item.label}}
                    </button>
                    <mat-divider></mat-divider>
                </div>
            </ng-container>
        </mat-menu>
    </ng-container>


</ng-template>